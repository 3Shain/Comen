<div fxLayout="row" style="height: 100%; flex-wrap: nowrap">
  <div fxFlex="auto" id="preview">
    <div
      class="background"
      [ngStyle]="{ 'background-color': adjustments.value.background }"
      [ngClass]="{ transparent: !adjustments.value.grid }"
    >
      <div
        [style.width.px]="adjustments.value.width"
        [style.height.px]="adjustments.value.height"
      >
        <ng-content></ng-content>
      </div>
      <!-- <div class="button-container">
                <button mat-fab color="accent" aria-label="预览设置"
              >
                  <mat-icon>preview</mat-icon>
                </button>
               
              </div> -->
    </div>
    <div
      class="toolbar"
      [formGroup]="adjustments"
      cdkDragBoundary="#preview"
      cdkDrag
    >
      <div>
        <mat-form-field appearance="outline" style="margin-right: 8px">
          <mat-label>宽</mat-label>
          <input matInput type="number" formControlName="width" /><span
            matSuffix
            >px</span
          >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>高</mat-label>
          <input matInput type="number" formControlName="height" /><span
            matSuffix
            >px</span
          >
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" style="margin-right: 8px">
          <mat-label>背景色</mat-label>
          <input
            matInput
            type="text"
            [value]="adjustments.get('background').value"
            [formControl]="adjustments.get('background')"
          />
          <span matSuffix>
            <comen-color-control
              [value]="adjustments.get('background').value"
              style="margin-top: 2px; margin-right: 8px"
              formControlName="background"
            >
            </comen-color-control>
          </span>
        </mat-form-field>
        <mat-slide-toggle formControlName="grid">关闭网格</mat-slide-toggle>
      </div>
    </div>
  </div>
  <div class="middle" fxFlex="50%" [formGroup]="formGroup">
    <mat-card style="margin-bottom: 1em">
      <mat-card-title>{{ metadata.displayName }}</mat-card-title>
      <mat-card-subtitle>{{ metadata.description }}</mat-card-subtitle>
      <mat-card-actions align="end">
        <button mat-button>保存</button>
        <button mat-raised-button color="primary">生成</button>
      </mat-card-actions>
    </mat-card>
    <mat-accordion multi>
      <mat-expansion-panel expanded="true" hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title> 全局设置 </mat-panel-title>
          <mat-panel-description>
            以下项目仅于导出后生效
          </mat-panel-description>
        </mat-expansion-panel-header>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> 资源库 </mat-panel-title>
          <mat-panel-description> 用于 </mat-panel-description>
        </mat-expansion-panel-header>
      </mat-expansion-panel>
      <mat-expansion-panel *ngFor="let s of configuration.sections | keyvalue">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ s.value.displayName }}
          </mat-panel-title>
          <mat-panel-description>
            <mat-icon>{{ s.value['x-icon'] }}</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <comen-config-plane
          [sectionSetting]="s.value"
          [formControlName]="s.key"
        >
        </comen-config-plane>
      </mat-expansion-panel>
    </mat-accordion>
    <comen-monaco-control></comen-monaco-control>
  </div>
</div>
